{% extends "layout.html" %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="../static/css/vote_static.css">
    <SCRIPT src='../static/js/ChartNew.js'></script>
    <script type=text/javascript>
        $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
        var username = "{{ user.username }}";

        var plotdata = {
            labels : {{vote_options_list | safe}},
            datasets : [
            {
                fillColor : "rgba(255,153,0,0.5)",
                strokeColor : "rgba(255,153,0,1)",
                pointColor : "rgba(255,153,0,1)",
                pointstrokeColor : "orange",
                data : {{votes_distribution}},
    //          data : [40],

          title : "2014"
            }
        ]
        }

        var startWithDataset =1;
        var startWithData =1;

        var opt = {
              //scaleOverride: true,
              yAxisMinimumInterval : 1,
              xAxisMinimumInterval : 1,
              scaleIntegersOnly: true,
              animationStartWithDataset : startWithDataset,
              animationStartWithData : startWithData,
              animationSteps : 200,
            //canvasBorders : true,
              canvasBordersWidth : 3,
              canvasBordersColor : "black",
              graphTitle : "{{vote.vote_content}}",
              legend : true,
              inGraphDataShow : true,
              annotateDisplay : true,
              graphTitleFontSize: 18

        }

        window.onload = function(){
            var horizonralbar = new Chart(document.getElementById("canvas_HorizontalBar").getContext("2d")).HorizontalBar(plotdata,opt);
        }

    </script>
{% endblock %}

{% block navbar %}
    <ul class="nav navbar-nav">
        <li class="dropdown">
            <a href="#" class="dropdown-toggle"
                data-toggle="dropdown">
                {{ user.username }}
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li><a href="{{ url_for('logout') }}">Log Out</a></li>
            </ul>
        </li>
    </ul>
{% endblock %}

{% block content %}
    <div class="vote-results">
        <div id="discuss_div" class="panel panel-default">
            <div class="panel-heading">
                <h4>{{vote.vote_content}}</h4>
                created by {{ creator.username }}
            </div>
            <div class="panel-body">
                <canvas id="canvas_HorizontalBar" height="300px" width="600px"></canvas>
            </div>
            <div class="panel-footer">
                <ol class="breadcrumb">
                    <li><a href="{{ url_for('index') }}">Grape</a></li>
                    <li><a href="{{ url_for('groupDetail', group_id=vote.group_id) }}">{{ group.name }}</a></li>
                    <li class="active">{{ vote.vote_content }}</li>
                </ol>
            </div>
    	</div>
    </div>
{% endblock %}

<!-- https://plot.ly/~abhishek.mitra.963/1/.embed?width=800&height=600 -->